<div class="grid-100">
    <strong>Załączniki do rozliczenia</strong>
</div>
<!--TODO: maksymalny rozmiar plików-->
<div class="grid-100 redLabel">
    Maksymalny rozmiar załączonych plików to X MB. W systemie można załączać jedynie dokumenty z następującymi rozszerzenieami: PDF,DOC,DOCX,XLS,XLSX,PNG,JPG,GIF.
</div>
<div style="padding-left:20px">
    <table>
        <thead>
        <tr class="grid-100 tableHeader-names">
            <th class=grid-20">
                <div>Rodzaj załącznika</div>
            </th>
            <th class="grid-20">
                <div>Numer dokumentu (np. FV) lub opis</div>
            </th>
            <th class="grid-20">
                <div>Opis dodatkowy</div>
            </th>
            <th class="grid-20">
            </th>
            <th class="grid-20">
            </th>
        </tr>
        </thead>
        <tbody class="tableData">
        <tr ng-repeat="item in model.attachments" ng-class="{'row-even': $even, 'row-odd': $odd}" data-ng-hide="item.markToDelete">
            <td>
                <select ng-model="item.code" data-ng-disabled="item.required">
                    <option data-ng-repeat="t in modelTypes.types" data-ng-show="!t.required" ng-selected="{{t.code == item.code}}" value="{{t.code}}">{{t.name}}</option>
                </select>
            </td>
            <td><input type="text" data-ng-model="item.documentNumber"/>
                <gryf-validation-msg path="attachments[{{$index}}].documentNumber"></gryf-validation-msg>
            </td>
            <td>
                <input type="text" data-ng-model="item.additionalDescription"/>
            </td>
            <td>
                <a>{{item.file.name ? item.file.name : item.originalFileName}}</a>
            </td>
            <td>
                <ul class="buttons">
                    <!--TODO:przywileje-->
                    <li>
                        <!--TODO: dodać zmienną definiującą maksymalny rozmiar pliku, gdy nie został zdefiniowany per typ-->
                        <button class="standardButton" ng-model="item.file" ngf-select ngf-max-size="{{item.maxFileSize ? item.maxFileSize : '2MB'}}" ngf-model-invalid="item.errorFile" data-ng-click="onItemClick(item, $index)"
                                ngf-pattern=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.gif">
                            {{(!item.file.name && !item.originalFileName) ? "Wgraj plik" : "Zmień plik"}}
                        </button>
                        <i style="color:red" ng-show="item.errorFile.$errorMessages.maxSize">Załącznik przekracza maksymalny rozmiar pliku: {{item.maxFileSize ? item.maxFileSize / 1024 / 1024 : '2'}}MB</i>
                        <i style="color:red" ng-show="item.errorFile.$errorMessages.pattern">Niepoprawne rozszerzenie pliku</i>
                        <gryf-validation-msg path="attachments[{{$index}}].file"></gryf-validation-msg>
                    </li>
                    <li>
                        <button class="standardButton" data-ng-if="!item.required" ng-click="deleteAtt(item)">
                            Usuń
                        </button>
                    </li>
                </ul>
            </td>
        </tr>
        </tbody>
    </table>
    <div>
        <button class="standardButton" ng-click="addNew()">Dodaj plik</button>
    </div>
</div>