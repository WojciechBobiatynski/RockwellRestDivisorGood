<article itemprop="text" class="text centered" ng-controller="ValidationController">
    <h1 itemprop="headline name" class="headline name">Zmiana hasła</h1>

    <p itemprop="description" class="description">Prosimy, wprowadź nowe hasło.</p>
    <p>Hasło musi zawierać co najmniej 8 znaków, minimum jedną cyfrę, znak specjalny oraz wielkie i małe litery.</p>
    <p ng-show="errorMessage" style="color:red">{{errorMessage}}</p>
    <section class="form form-change-password">
        <form name="changePasswordForm" ng-submit="submitForm()" novalidate>
            <fieldset>
                <div class="field input input-short required">
                    <div class="label-change-password">
                        <label for="oldPassword">Stare hasło:</label>
                    </div>
                    <div class="control">
                        <input id="oldPassword" type="password" name="oldPassword" ng-model="password.oldPassword"  tabindex="1" ng-pattern="passwordRegex" required>
                        <span ng-show="changePasswordForm.oldPassword.$dirty || changePasswordForm.oldPassword.$touched" style="color:red">
                            <span ng-show="changePasswordForm.oldPassword.$error.required" style="color:red">Wprowadź stare hasło!</span>
                        </span>
                        <span ng-show="changePasswordForm.oldPassword.$error.pattern" style="color:red">Wprowadź poprawne hasło!</span>
                        <span ng-show="changePasswordForm.oldPassword.$valid && changePasswordForm.newPassword.$valid">
                            <span ng-show="password.oldPassword == password.newPassword" style="color:red">Stare i nowe hasło nie mogą być identyczne!</span>
                        </span>
                    </div>
                </div>
                <div class="field input input-short required">
                    <div class="label-change-password">
                        <label for="newPassword">Nowe hasło:</label>
                    </div>
                    <div class="control">
                        <input id="newPassword" type="password" name="newPassword"  ng-model="password.newPassword" tabindex="2" ng-pattern="passwordRegex" required>
                        <span ng-show="changePasswordForm.newPassword.$dirty || changePasswordForm.newPassword.$touched" style="color:red">
                            <span ng-show="changePasswordForm.newPassword.$error.required" style="color:red">Wprowadź nowe hasło!</span>
                        </span>
                        <span ng-show="changePasswordForm.newPassword.$error.pattern" style="color:red">Wprowadź poprawne hasło!</span>
                    </div>
                </div>
                <div class="field input input-short required">
                    <div class="label-change-password">
                        <label for="newPasswordRepeated">Powtórz nowe hasło:</label>
                    </div>
                    <div class="control">
                        <input id="newPasswordRepeated" type="password" name="newPasswordRepeated" ng-model="password.newPasswordRepeated" tabindex="2" ng-pattern="passwordRegex" required>
                        <span ng-show="changePasswordForm.newPasswordRepeated.$dirty || changePasswordForm.newPasswordRepeated.$touched" style="color:red">
                            <span ng-show="changePasswordForm.newPasswordRepeated.$error.required" style="color:red">Wprowadź nowe hasło ponownie!</span>
                        </span>
                        <span ng-show="changePasswordForm.newPasswordRepeated.$error.pattern" style="color:red">Wprowadź poprawne hasło!</span>
                        <span ng-show="changePasswordForm.newPassword.$valid && changePasswordForm.newPasswordRepeated.$valid">
                            <span ng-show="password.newPassword != password.newPasswordRepeated" style="color:red">Hasła muszą byc identyczne!</span>
                        </span>
                    </div>
                </div>
            </fieldset>
            <div class="submit submit-new-password">
                <button type="submit" tabindex="3" ng-style="changePasswordForm.$invalid && {'background-color': '#adadad'}"
                        ng-disabled="changePasswordForm.$invalid">Zapisz nowe hasło</button>
                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
            </div>
            <script>
                document.loginForm.username.focus();
                var hashFragment = window.location.hash;
                if (hashFragment) {
                    var action = document.loginForm.getAttribute('action');
                    document.loginForm.setAttribute('action', action + hashFragment);
                }
            </script>
        </form>
    </section>
</article>




