ALTER TABLE ${gryf.schema}.TI_TRAININGS
ADD (GRANT_PROGRAM_ID NUMBER);

ALTER TABLE ${gryf.schema}.TI_TRAININGS
ADD CONSTRAINT TI_TRAININGS_GRANT_PROGRAM_FK FOREIGN KEY
(
  GRANT_PROGRAM_ID 
)
REFERENCES ${gryf.schema}.GRANT_PROGRAMS
(
  ID 
)
ENABLE;

COMMENT ON COLUMN ${gryf.schema}.TI_TRAININGS.GRANT_PROGRAM_ID IS 'Id projektu/programu';

UPDATE ${gryf.schema}.TI_TRAININGS SET GRANT_PROGRAM_ID = (SELECT ID FROM ${gryf.schema}.GRANT_PROGRAMS WHERE PROGRAM_CODE ='${program.code.wupkkz}' ) WHERE REIMBURSMENT_CONDITIONS LIKE '%RPMP%_WZ%';
UPDATE ${gryf.schema}.TI_TRAININGS SET GRANT_PROGRAM_ID = (SELECT ID FROM ${gryf.schema}.GRANT_PROGRAMS WHERE PROGRAM_CODE ='${program.code.wupkkk}' ) WHERE REIMBURSMENT_CONDITIONS LIKE '%RPMP%_WKK%';

ALTER TABLE ${gryf.schema}.TI_TRAININGS
MODIFY (GRANT_PROGRAM_ID NOT NULL);


